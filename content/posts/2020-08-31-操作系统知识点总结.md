---
title: 操作系统知识点总结
date: 2020-08-31 19:32:21
categories: 
- Notes
tags:
- 操作系统

---

### 1. 进程和线程

---

1. 进程：系统进行资源分配的基本单位；
2. 线程：CPU调度的基本单位：
   1. 共享进程的全部资源；
   2. 独有程序计数器、寄存器和栈。

<!--more-->

---

### 2. 进程通信

---

低级通信：用信号量进行的进程间的互斥和同步；

高级通信：利用操作系统所提供的一组通信命令传送大量数据的通信方式：

1. 共享存储器系统：例：剪贴板；
2. 消息传递系统：例：邮槽；
3. 管道通信系统；

通信方式：

1. 管道：
   1. 有名管道：单向通信，有固定的读端和写端，半双工通信方式，允许无亲缘关系进程间的通信；
   2. 无名管道：数据单向流动，只能在具有亲缘关系的进程间使用；
2. 信号量：是一个计数器，控制多进程对共享资源的访问，作为一种锁机制；
3. 消息队列：消息的链表；
4. 信号；
5. 共享内存：最快的IPC，常与信号量配合，实现进程间的同步和通信；
6. 套接字。

---

### 3. 线程通信

---

1. 互斥量；
2. 信号量；
3. 信号。

---

### 4. 死锁

---

概念：在多个并发进程中，某个进程持有某种资源而又等待别的进程释放他们保持的资源，在为改变状态之前不能向前推进，从而在这一组进程中产生了死锁，多个进程被无限期地阻塞、相互等待的状态；

必要条件：

1. 互斥：一个资源每次只能被一个进程使用；
2. 不可抢占：进程已获得的资源，在未使用完之前，不能前行剥夺；
3. 占有并等待：一个进程因请求资源而阻塞时，对已获得的资源保持不放；
4. 环形等待：若干进程之间形成一种首尾相接的循环等待资源关系；

死锁的解除与预防：

1. 破坏互斥：
   * 允许系统资源都能共享；
   * 缺点：有些资源不能同时访问，如打印机，且在某些场合应保护互斥性；
2. 破坏占有并等待：
   * 预先静态分配，在进程运行前一次申请完它所需要的全部资源，在它的资源未满足前，不投入运行，一旦投入运行资源全部归他所有；
   * 缺点：系统资源浪费，个别资源长期被占用，导致一些进程不能运行；
3. 破坏不可抢占：
   * 当一个进程保持了某些资源，请求新资源而不能被满足时，必须释放所保持的资源，以后重新申请；
   * 缺点：实现复杂，释放资源可能会造成前一阶段工作失效，常用于易于保存和回恢复的资源；
4. 破坏循环等待：
   * 给系统资源编号，规定进程必须按照编号递增的顺序请求资源；
   * 缺点：实现复杂，编号不一定与实际使用顺序相同；

避免死锁的方式：

1. 判断系统状态：在分配前，先计算分配的安全性；
2. 银行家算法：
   1. 申请的贷款额度不能超过银行西安有资金总额；
   2. 分批次向银行提款，但是贷款额度不能超过一开始最大需求量的总额；
   3. 暂时不能满足客户申请的资金额度时，在有限时间内给予贷款；
   4. 客户要在规定时间内还款。

---

### 5. 分段与分页内存管理的区别

---

1. 分段：符合用户视角，将地址空间分为若干段：代码段、数据段、堆、栈；
2. 分页：方便系统管理，将逻辑地址划分为固定大小的页，物理内存划分为同样大小的帧，方便程序加载。

---

### 6. 虚拟内存

---

1. 让每个进程拥有独立的地址空间，且这些空间被分为大小相等的页，被映射到物理内存中，对进程而言，逻辑上有很大的内存空间，但其中一部分对应于物理内存，还有一些在硬盘上；
2. 页面置换算法：FIFO、LRU、LFU、OPT；
3. 优点：
   1. 物理内存可为多个进程共享；
   2. 通过共享页允许进程间共享内存
4. 虚拟内存大小：
   1. 对于32位：0-2^32 ~= 0-4G；
   2. 对于64位：0-2^64；