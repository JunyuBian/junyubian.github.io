---
title: 计算机网络知识点总结
date: 2020-08-31 16:40:10
categories:
- Notes
- Ch
tags:
- 计算机网络
---

### 1. Https加密过程

1. 客户端发起握手请求；
2. 服务端返回已有的`证书公钥`（服务端通过CA认证后，拥有`证书公钥`和`证书私钥`）；
3. 客户端验证证书是否有效；
4. 若证书有效，则生成一个`随机数`；
5. 用`证书公钥`加密生成的随机数；
6. 将加密后的`密钥`发送给服务端；
7. 服务端用`证书私钥`解密密钥；
8. 服务端使用解密出的密钥加密要发送的内容并发送给客户端；
9. 客户端使用秘钥解密信息。

<!--more-->

---

### 2. 对称加密与非对称加密

对称加密：加密和解密使用同一个密钥；

非对称加密：使用公钥和私钥进行加解密。

---

### 3. CLOSE_WAIT和TIME_WAIT

在四次挥手中，

CLOSE_WAIT：服务端收到FIN后，发送ACK给客户端，之后进入CLOSE_WAIT状态；

TIME_WAIT：客户端收到FIN后，发送ACK给服务端，之后进入TIME_WAIT状态。

---

### 4. TCP如何保证传输可靠性

1. 数据包校验；
2. 重排序：TCP将失序数据进行重新排序后才交给应用层；
3. 应答机制：回复ACK；
4. 超时重传；
5. 流量控制：TCP连接的每一方都有固定大小缓冲空间，通过可变大小的滑窗协议完成。

---

### 5.如何预防TCP的DDos攻击

1. 限制同时打开SYN半链接的数目；

   方法：在注册表中对TCPMaxHalfOpen相关参数进行调整；

   TCPMaxHalfOpen相关参数：

   1. SynAttackProtect：决定了系统受到SYN攻击时采取的保护措施，包括减少系统SYN+ACK的重试次数等；
   2. TcpMaxHalfOpen：系统允许同时打开的半链接值；
   3. TcpMaxHalfOpenRetried：决定在什么情况下系统打开SYN攻击保护；

2. 缩短SYN半链接的Time out时间。

---

### 6. TCP如何实现拥塞控制

1. 慢启动：以指数方式，由小到大逐渐增加拥塞窗口(cwnd)的大小，慢启动达到ssthresh阈值则进入拥塞避免；
2. 拥塞避免：每经过一个往返时间RTT就把发送方拥塞窗口增加1，按照线性增长，发生拥塞，cwnd降为1，重新慢启动；
3. 快重传：接收方收到失序报文后，立即发出重复确认，发送方收到三个连续重复确认则立即重传；
4. 快恢复：发送方收到重复确认后，执行`乘法减小` ，把ssthresh减半，但不执行慢开始，因为如果发生阻塞，不会收到多个重复确认，而是将cwnd设置为ssthresh大小进行拥塞避免。

---

### 7. 从输入网址到获得页面的过程

1. 浏览器通过DNS查询对应IP地址：
   1. 浏览器搜索自身DNS缓存；
   2. 搜索操作系统DNS缓存；
   3. 向本地DNS服务器进行查询；
   4. 若不在本地域名服务器，则递归或迭代查询：
      1. 递归查询：服务器作为DNS客户向根服务器查询；
      2. 迭代查询：根服务器告知服务器需要查询的IP，服务器自己进行查询；
2. 获取IP地址后，浏览器向服务器请求建立连接，发起三次握手；
3. TCP连接建立后，浏览器向服务器发送HTTP请求；
4. 浏览器对请求进行处理，并将处理结果返回给浏览器；
5. 浏览器进行渲染，呈现页面给用户。

---

### 8. Session 与 Cookie

**Session**：

1. 用户访问服务器时，服务器首先检查请求中是否包含sessionId，若包含，说明session已创建，若不包含，则为用户建立一个session并分配sessionId（依赖Cookie）；

2. 用户提交表单时，浏览器将用户的SessionId附在HTTP头信息中，服务器处理完表单将结果返回sessionId对应的用户；

3. 若Cookie被禁用：
   1. URL重写：直接将sessionId附在URL后；
      2. 表单隐藏字段：修改表单，添加一个隐藏字段，以便提交时能够回传sessionId
4. session共享：修改cookie的域名为父域名；
5. 使用场景：购物车；

**Cookie**：

1. 若服务器需要记录用户状态，则使用response向客户端颁发一个cookie，再次请求时，浏览器将请求网址连同cookie一起提交给服务器；
2. 会话Cookie和持久Cookie：
   1. 会话cookie：不设置过期时间，关闭浏览器窗口，cookie就消失，一般保存在内存里而不是硬盘上；
   2. 持久cookie：设置了过期时间，cookie有效指导超过了设定的过期时间，一般存储在硬盘上；
3. 使用场景：登录网站。

---

### 9. 七层网络体系结构

1. 物理层：实现相邻计算机节点之间比特流透明传送；
2. 数据链路层：接手物理层的位流行驶数据，封装成帧，传送到上一层，同样，也将上一层的数据帧，拆装成位流转发到物理层；
3. 网络层：将网络地址翻译为对应的物理地址，并通过路由算法选择最佳路径；
4. 传输层：为不同主机上运行的进程提供逻辑通信；
   1. 区别于网络层：网络层完成主机间的逻辑通信，传输层完成应用进程间的逻辑通信；
5. 会话层：应用程序与网络之间的接口，负责在网络中的两节点之间建立、维持和终止通信；
6. 表示层：对来自应用层的命令和数据进行解释；
7. 应用层：为用户的应用进程提供网络通信服务。

---

### 10. TCP和UDP对应的常见应用层协议

1. TCP：
   1. FTP：文件传输协议；
   2. Telnet：用于远程登录的端口：
      1. 和ssh的区别：
         1. telnet为明文传送，ssh为加密传送；
         2. ssh使用公钥对服务器的用户进行身份验证，telnet没有使用公钥；
   3. SMTP：邮件传送协议，用于发送邮件；
   4. POP3：用于接收邮件；
   5. HTTP；
2. UDP：
   1. DNS：域名解析服务；
   2. SNMP：网络管理协议，用于管理网络设备；
   3. TFTP：简单文件传输协议。

---

### 11. ARP

1. 将IP地址转换为MAC地址；
2. 网络通过帧进行传输，帧里面需要目标主机的MAC地址。

---

### 12. 常见状态码

1XX：请求已被接受，正在处理；

2XX：请求成功被处理；

3XX：重定向：

​	301：永久性转移；

​	302：暂时性转移；

​	304：已缓存；

4XX：客户端请求不合法：

​	400：请求语法有问题；

​	403：拒绝请求；

​	404：客户端所访问的页面不存在；

5XX：服务器不能处理合法请求：

​	500：服务器内部错误；

​	503：服务暂时不可用。
